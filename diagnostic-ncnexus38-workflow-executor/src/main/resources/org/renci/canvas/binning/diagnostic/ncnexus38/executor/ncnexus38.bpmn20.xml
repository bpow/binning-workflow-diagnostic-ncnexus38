<?xml version="1.0" encoding="UTF-8" ?>
<definitions id="definitions" targetNamespace="http://activiti.org/bpmn20" xmlns="http://www.omg.org/spec/BPMN/20100524/MODEL"
  xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance" xmlns:activiti="http://activiti.org/bpmn">

  <process id="ncnexus38_diagnostic_binning" name="NCNEXUS38DiagnosticBinning">

    <startEvent id="start" />
    <serviceTask id="initialize" activiti:class="org.renci.canvas.binning.core.diagnostic.InitializeDelegate" />
    <serviceTask id="loadVCF" activiti:class="org.renci.canvas.binning.diagnostic.ncnexus38.executor.LoadVCFDelegate" />
    <serviceTask id="loadCoverage" activiti:class="org.renci.canvas.binning.diagnostic.ncnexus38.executor.LoadCoverageDelegate"
      activiti:async="true" activiti:exclusive="false" />
    <serviceTask id="updateFrequencies" activiti:class="org.renci.canvas.binning.diagnostic.ncnexus38.executor.UpdateFrequenciesDelegate"
      activiti:async="true" activiti:exclusive="false" />
    <serviceTask id="annotateVariants" activiti:class="org.renci.canvas.binning.diagnostic.ncnexus38.executor.AnnotateVariantsDelegate" />
    <serviceTask id="updateDiagnosticBinsHGMD" activiti:class="org.renci.canvas.binning.diagnostic.ncnexus38.executor.UpdateDiagnosticBinsHGMDDelegate"
      activiti:async="true" activiti:exclusive="false" />
    <serviceTask id="updateDiagnosticBinsClinVar" activiti:class="org.renci.canvas.binning.diagnostic.ncnexus38.executor.UpdateDiagnosticBinsClinVarDelegate"
      activiti:async="true" activiti:exclusive="false" />
    <serviceTask id="generateReport" activiti:class="org.renci.canvas.binning.diagnostic.ncnexus38.executor.GenerateReportDelegate" />
    <serviceTask id="finalize" activiti:class="org.renci.canvas.binning.core.diagnostic.FinalizeDelegate" />
    <endEvent id="end" />

    <sequenceFlow sourceRef="start" targetRef="initialize" />
    <sequenceFlow sourceRef="initialize" targetRef="loadVCF" />
    <sequenceFlow sourceRef="loadVCF" targetRef="fork" />
    <parallelGateway id="fork" activiti:async="true" />
    <sequenceFlow sourceRef="fork" targetRef="loadCoverage" />
    <sequenceFlow sourceRef="fork" targetRef="updateFrequencies" />
    <parallelGateway id="join" activiti:async="true" />
    <sequenceFlow sourceRef="loadCoverage" targetRef="join" />
    <sequenceFlow sourceRef="updateFrequencies" targetRef="join" />
    <sequenceFlow sourceRef="join" targetRef="annotateVariants" />
    <sequenceFlow sourceRef="annotateVariants" targetRef="updateDiagnosticBinsFork" />
    <parallelGateway id="updateDiagnosticBinsFork" activiti:async="true" />
    <sequenceFlow sourceRef="updateDiagnosticBinsFork" targetRef="updateDiagnosticBinsHGMD" />
    <sequenceFlow sourceRef="updateDiagnosticBinsFork" targetRef="updateDiagnosticBinsClinVar" />
    <parallelGateway id="updateDiagnosticBinsJoin" activiti:async="true" />
    <sequenceFlow sourceRef="updateDiagnosticBinsHGMD" targetRef="updateDiagnosticBinsJoin" />
    <sequenceFlow sourceRef="updateDiagnosticBinsClinVar" targetRef="updateDiagnosticBinsJoin" />
    <sequenceFlow sourceRef="updateDiagnosticBinsJoin" targetRef="generateReport" />
    <sequenceFlow sourceRef="generateReport" targetRef="finalize" />
    <sequenceFlow sourceRef="finalize" targetRef="end" />

  </process>

</definitions>
